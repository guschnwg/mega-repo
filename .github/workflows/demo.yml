name: GitHub Actions Demo
run-name: ${{ github.actor }} is testing out GitHub Actions ðŸš€
on: [push]
env:
  # Setting an environment variable with the value of a configuration variable
  enva: ${{ vars.REACT_APP_GOOGLE_MAPS_API_KEY }}
  envi: ${{ secrets.REACT_APP_GOOGLE_MAPS_API_KEY }}
  enve: OI
jobs:
  Explore-GitHub-Actions:
    runs-on: ubuntu-latest
    if: github.ref == 'refs/heads/main'
    steps:
      - run: echo ${{ env.enva }}
      - run: echo ${{ env.envo }}
      - run: echo ${{ env.envi }}
      - run: echo ${{ env.enve }}
      - run: echo $enva
      - run: echo $envo
      - run: echo $envi
      - run: echo $enve
      - run: echo $REACT_APP_GOOGLE_MAPS_API_KEY
      - name: Check out repository code
        uses: actions/checkout@v3
      - name: Setting up directory
        run: mkdir ${{ runner.temp }}/.ship
      - name: Building the tcc project
        run: |
          cd tcc
          yarn
          yarn build
          mv build ${{ runner.temp }}/.ship/tcc

      - name: Building the financing calculator project
        run: |
          cd financing-calculator
          yarn
          yarn build
          mv build ${{ runner.temp }}/.ship/financing-calculator
          
      - name: Changing to gh-pages
        uses: actions/checkout@v3
        with:
          ref: gh-pages
          
      - name: Cleaning up the root
        run: git rm -rf . || true
      
      - name: Setting up the root
        run: mv ${{ runner.temp }}/.ship/* ./
      
      - name: Configuring git
        run: |
          git config user.name github-actions
          git config user.email github-actions@github.com
      
      - name: Pushing it
        run: |
          git add -A
          git commit -m 'ðŸš¢'
          git push --set-upstream origin gh-pages -f
